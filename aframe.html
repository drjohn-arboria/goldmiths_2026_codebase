<html>
<head>
    <!-- one idea of external libraries -->

     <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>

    <!-- two THREEJS -->
    <script src="https://unpkg.com/three@0.124.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.124.0/examples/js/controls/OrbitControls.js"></script>


    <script>
        function init() {
            console.log('THREE version:', THREE.REVISION);
            console.log('OrbitControls:', THREE.OrbitControls);

            // If this trips, the controls file isn't loading properly.
            if (!THREE.OrbitControls) {
                alert('OrbitControls not loaded - check network tab / CDN URL');
                return;
            }

            // === Basic setup ===
            const scene = new THREE.Scene();

            const camera = new THREE.PerspectiveCamera(
                60,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            );
            camera.position.set(8, 6, 12);

            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            // OrbitControls is attached to THREE in this non-module build
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            // controls.enableDamping = true;

            // === Lights ===
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            const dirLight = new THREE.DirectionalLight(0xffffff, 1);
            dirLight.position.set(5, 10, 7);
            scene.add(dirLight);

            // === Ground plane ===
            const groundGeo = new THREE.PlaneGeometry(50, 50);
            const groundMat = new THREE.MeshStandardMaterial({ color: 0x222222 });
            const ground = new THREE.Mesh(groundGeo, groundMat);
            ground.rotation.x = -Math.PI / 2;
            ground.position.y = -1;
            ground.receiveShadow = true;
            scene.add(ground);

            // === Sphere ===
            const sphereGeo = new THREE.SphereGeometry(1, 32, 32);
            const sphereMat = new THREE.MeshStandardMaterial({
                color: 0x3399ff,
                roughness: 0.4,
                metalness: 0.1
            });
            const sphere = new THREE.Mesh(sphereGeo, sphereMat);
            sphere.position.set(-3, 0, 0);
            scene.add(sphere);

            // === Cube ===
            const cubeGeo = new THREE.BoxGeometry(2, 2, 2);
            const cubeMat = new THREE.MeshStandardMaterial({
                color: 0xff6633,
                roughness: 0.6,
                metalness: 0.2
            });
            const cube = new THREE.Mesh(cubeGeo, cubeMat);
            cube.position.set(0, 0, 0);
            scene.add(cube);

            // === Cylinder ===
            const cylinderGeo = new THREE.CylinderGeometry(1, 1, 3, 32);
            const cylinderMat = new THREE.MeshStandardMaterial({
                color: 0x55ff55,
                roughness: 0.5,
                metalness: 0.3
            });
            const cylinder = new THREE.Mesh(cylinderGeo, cylinderMat);
            cylinder.position.set(3, 0, 0);
            scene.add(cylinder);

            // === Skydome ===
            const skyGeo = new THREE.SphereGeometry(100, 64, 64);
            const skyMat = new THREE.MeshBasicMaterial({
                color: 0x0000ff,
                side: THREE.BackSide
            });
            const skydome = new THREE.Mesh(skyGeo, skyMat);
            scene.add(skydome);

            // === Resize handling ===
            window.addEventListener('resize', onWindowResize, false);

            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }

            // === Animation loop ===
            function animate() {
                requestAnimationFrame(animate);

                sphere.rotation.y += 0.01;
                cube.rotation.y += 0.01;
                cylinder.rotation.y += 0.01;

                // controls.update(); // enable if you turn on damping
                renderer.render(scene, camera);
            }

            animate();
        }
    </script>

    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
        }
        canvas {
            display: block;
        }
    </style>

</head>
<body>
<a-scene>
<!--    <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>-->
<!--    <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>-->
<!--    <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>-->
<!--    <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>-->
    <a-sky color="#ffff00"></a-sky>


    <a-entity
            gltf-model="url(models/bedsit.glb)"
            position="0 1 -3"
            scale="0.5 0.5 0.5"
            rotation="0 180 0">
    </a-entity>


    <a-entity light="type: directional; intensity: 1" position="1 1 1"></a-entity>
    <a-entity light="type: ambient; intensity: 0.5"></a-entity>

</a-scene>
</body>
</html>
