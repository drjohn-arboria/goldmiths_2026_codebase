<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>
        body {
            margin: 0px;
        }
        video {
            width: 100%;
        }
        .video_holder {
            background-color: #0e6c8d;
        }
        .button_holder {
            background-color: #686868;
            height: 100px;
        }
        .button {
            width: 50px;
            height: 50px;
            background-color: #efd964;
            margin-right: 2px;
            float: right;
            overflow: hidden;
        }
        .button_marker {
            width: 20px;
            height: 20px;
            background-color: #0e6c8d;
            margin: 2px;
        }
        .canvas_holder {
            background-color: #9e9828;
            height: 100%;
        }
        canvas {
            background-color: #ff0000;
        }
    </style>

    <script>
        function init() {

            // two blitting images

            var canvas_one = document.getElementById("canvas_one");
            var context_one = canvas_one.getContext("2d");

            // //
            var canvas_two = document.getElementById("canvas_two");
            var context_two = canvas_two.getContext("2d");
            //
            var phoebe_one = document.getElementById("cat_image");
            //
            // //
            // // // draw one image to one canvas
            context_one.drawImage(phoebe_one, 0, 0,320 ,240);
            //
            // //
            // // // draw parts of an image to the canvas
            var section_one = context_one.getImageData(0,0,100,100);
            context_two.putImageData(section_one, 0, 0);
            var section_two = context_one.getImageData(0,100,100,100);
            context_two.putImageData(section_two, 0, 100);
            //
            // // three video drawing
            //
            var video = document.getElementById('video_landscape');
            var canvas_three = document.getElementById('canvas_three');
            var context_three = canvas_three.getContext('2d');
            // //
            // // // Ensure video is loaded before processing
            video.addEventListener('play', function() {
                drawFrame();
            });
            //
            function drawFrame() {
                if (video.paused || video.ended) return;

                // Draw current video frame to canvas
                context_three.drawImage(video, 0, 0, 320 , 240);

                // Get pixel data
                var frame = context_three.getImageData(0, 0, canvas_three.width, canvas_three.height);
                var data = frame.data; // [R, G, B, A, R, G, B, A, ...]

                // Loop through pixels and keep only red channel
                for (let i = 0; i < data.length; i += 4) {
                    var red = data[i];     // R
                    data[i] = red;           // Keep red
                    data[i + 1] = 0;         // Remove green
                    data[i + 2] = 0;         // Remove blue
                    // Alpha (data[i+3]) stays unchanged
                }

                // Put modified pixels back
                context_three.putImageData(frame, 0, 0);

                context_three.putImageData(section_one, 100, 100);

                // Schedule next frame
                requestAnimationFrame(drawFrame);

            }

            var catButton = document.getElementById("cat_button");

            catButton.onclick = function() {

                var video_landscape = document.getElementById("video_landscape");
                video_landscape.play();
            }

            var stopButton = document.getElementById("stop_button");
            stopButton.onclick = function() {
                var video_landscape = document.getElementById("video_landscape");
                video_landscape.pause();
            }

            var swapButton = document.getElementById("swap");
            swapButton.onclick = function() {
                var video_landscape = document.getElementById("video_landscape");
                video_landscape.src = "videos/Movie.1.mp4";
            }
        }

    </script>
</head>
<body onload="init();">
  <div class="video_holder">
      <video width="320px" height="240px" loop id="video_landscape">
          <source src="videos/Movie.4.mp4" type="video/mp4">
      </video>
  </div>

   <div class="button_holder">
        <div class="button">
            <div class="button_marker" id="stop_button"></div>
        </div>
       <div class="button" id="cat_button">
            <img src="images/phoebe.jpg" width="50px" id="cat_image">
       </div>
       <div class="button" id="swap">

       </div>
   </div>


    <!-- one idea of a canvas -->
    <div class="canvas_holder">
        <canvas id="canvas_one" width="320px" height="240px"></canvas>
        <canvas id="canvas_two" width="320px" height="240px"></canvas>
        <canvas id="canvas_three" width="320px" height="240px"></canvas>
    </div>
</body>
</html>
